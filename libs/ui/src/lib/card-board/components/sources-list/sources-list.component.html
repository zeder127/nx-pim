<p-toolbar class="back-explorer-toolbar">
  <div class="p-toolbar-group-left">
    <b>Backlog Explorer</b>
  </div>
</p-toolbar>
<div class="list">
  <p-dropdown
    [options]="teams"
    optionLabel="name"
    [(ngModel)]="selectedTeam"
    (onChange)="onTeamChange($event.value)"
    class="team-dropdown"
    scrollHeight="400px"
  ></p-dropdown>

  <!--Filter-->
  <div class="filter">
    <span class="filter-input p-input-icon-left">
      <i class="pi pi-filter"></i>
      <input
        type="text"
        pInputText
        [(ngModel)]="filterText"
        placeholder="Filter"
        style="width: calc(100% - 1rem);"
      />
    </span>
    <button
      pButton
      pRipple
      type="button"
      class="p-button-text"
      icon="pi pi-{{newItemEditorOpened? 'times' :'plus'}}"
      (click)="newItemEditorOpened = !newItemEditorOpened"
      [ngClass]="{'editor-opened': newItemEditorOpened}"
    ></button>
  </div>

  <div [style.display]="newItemEditorOpened? 'block': 'none'" class="new-item-editor">
    <pim-new-item-editor [team]="selectedTeam"></pim-new-item-editor>
  </div>

  <!--List-->
  <div [sortablejs]="sourceCards" [sortablejsOptions]="cloneOption">
    <!--TODO call isMapped only once-->
    <div
      *ngFor="let card of sourceCards"
      [class.is-mapped]="isMapped(card.linkedWitId)"
      [class.available]="!isMapped(card.linkedWitId)"
      id="{{idPrefix}}{{card.linkedWitId}}"
    >
      <p>{{card.linkedWitId}} {{card.text}} ({{card.type}})</p>
    </div>
  </div>
</div>
